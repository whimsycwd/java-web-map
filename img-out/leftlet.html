<html>
<head>
 <!-- <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" /> -->
  <!-- // <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script> -->

  <link rel="stylesheet" type="text/css" href="./leaflet.css">
   <script type="text/javascript" src="./jquery.js"></script>

  <script type="text/javascript" src="./leaflet-src.js"></script>
  <link rel="stylesheet" type="text/css" href="./leaflet-self.css">
</head>
<body>

 <div id="map"></div>

 <script>
var map = L.map('map').setView([31.1869,121.5758], 15);
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    maxZoom: 18
}).addTo(map);


var obj = {"paths":[{"x":121.5921214,"y":31.1939116},{"x":121.5918926,"y":31.1938693},{"x":121.5909183,"y":31.1936846},{"x":121.5906017,"y":31.1936273},{"x":121.5905313,"y":31.1935952},{"x":121.591123,"y":31.1906424},{"x":121.5911409,"y":31.1905743},{"x":121.5911578,"y":31.1905097},{"x":121.5911946,"y":31.1903948},{"x":121.5909579,"y":31.1903447},{"x":121.5897072,"y":31.1901107},{"x":121.5892977,"y":31.1900372},{"x":121.5882986,"y":31.1898561},{"x":121.5880001,"y":31.189802},{"x":121.5873289,"y":31.1896804},{"x":121.5871812,"y":31.1896536},{"x":121.587099,"y":31.1896387},{"x":121.5869423,"y":31.1896103},{"x":121.5856853,"y":31.1893824},{"x":121.5855783,"y":31.189363},{"x":121.5855755,"y":31.1892868},{"x":121.5854641,"y":31.189267},{"x":121.5813969,"y":31.188516},{"x":121.5810292,"y":31.1884519},{"x":121.5806426,"y":31.188373},{"x":121.5801832,"y":31.1882647},{"x":121.5797691,"y":31.1881631},{"x":121.5795961,"y":31.1881246},{"x":121.5790767,"y":31.1880251},{"x":121.5784381,"y":31.18791},{"x":121.5778052,"y":31.1877959},{"x":121.577705,"y":31.1877779},{"x":121.5777311,"y":31.1877051},{"x":121.5780456,"y":31.1868296},{"x":121.5780804,"y":31.1867328},{"x":121.5784684,"y":31.1856527}]};

// var obj = {"paths":[{"x":121.5921214,"y":31.1939116},{"x":121.5918926,"y":31.1938693},{"x":121.5909183,"y":31.1936846},{"x":121.5906017,"y":31.1936273},{"x":121.5905313,"y":31.1935952},{"x":121.591123,"y":31.1906424},{"x":121.5911409,"y":31.1905743},{"x":121.5911578,"y":31.1905097},{"x":121.5911946,"y":31.1903948},{"x":121.5909579,"y":31.1903447},{"x":121.5897072,"y":31.1901107},{"x":121.5892977,"y":31.1900372},{"x":121.5882986,"y":31.1898561},{"x":121.5880001,"y":31.189802},{"x":121.5873289,"y":31.1896804},{"x":121.5871812,"y":31.1896536},{"x":121.587099,"y":31.1896387},{"x":121.5869423,"y":31.1896103},{"x":121.5856853,"y":31.1893824},{"x":121.5855783,"y":31.189363},{"x":121.5855755,"y":31.1892868},{"x":121.5854641,"y":31.189267},{"x":121.5813969,"y":31.188516},{"x":121.5810292,"y":31.1884519},{"x":121.5806426,"y":31.188373},{"x":121.5801832,"y":31.1882647},{"x":121.5797691,"y":31.1881631},{"x":121.5795961,"y":31.1881246},{"x":121.5790767,"y":31.1880251},{"x":121.5784381,"y":31.18791},{"x":121.5778052,"y":31.1877959},{"x":121.577705,"y":31.1877779}]};

// var obj = {
//     "paths": [
//         {
//             "x": 121.5986815,
//             "y": 31.1949077
//         },
//         {
//             "x": 121.5971781,
//             "y": 31.1946047
//         },
//         {
//             "x": 121.596917,
//             "y": 31.1945598
//         },
//         {
//             "x": 121.596769,
//             "y": 31.1945384
//         },
//         {
//             "x": 121.5966649,
//             "y": 31.194523
//         },
//         {
//             "x": 121.5965505,
//             "y": 31.1945104
//         },
//         {
//             "x": 121.5950174,
//             "y": 31.1943664
//         },
//         {
//             "x": 121.5947364,
//             "y": 31.194342
//         },
//         {
//             "x": 121.5944475,
//             "y": 31.1943138
//         },
//         {
//             "x": 121.5942023,
//             "y": 31.194284
//         },
//         {
//             "x": 121.5939042,
//             "y": 31.194244
//         },
//         {
//             "x": 121.5937627,
//             "y": 31.1942192
//         },
//         {
//             "x": 121.5936213,
//             "y": 31.1941945
//         },
//         {
//             "x": 121.5930251,
//             "y": 31.1940843
//         },
//         {
//             "x": 121.5926413,
//             "y": 31.1940133
//         },
//         {
//             "x": 121.5921214,
//             "y": 31.1939116
//         }
//     ]
// };

var latlngs = [];

obj.paths.forEach(function(e) {
	latlngs.push(L.latLng(e.y, e.x));

});




// var marker = L.marker([31.1634, 121.6031], {
// 	draggable : true
// }).addTo(map);


map.on('click', function(e) {
	L.marker(e.latlng).addTo(map);


	// $.get("http://localhost:8080/api/map/nearest/" + e.latlng.lat + "/" + e.latlng.lon, function(data) {
	// 	L.marker.L.latLng(data.y, data.x);
	// });

    alert(e.latlng);
});
// var circle = L.circle([51.508, -0.11], 500, {
//     color: 'red',
//     fillColor: '#f03',
//     fillOpacity: 0.5
// }).addTo(map);

// var polygon = L.polygon([
//     [51.509, -0.08],
//     [51.503, -0.06],
//     [51.51, -0.047]
// ]).addTo(map);

// marker.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup();
// circle.bindPopup("I am a circle.");
// polygon.bindPopup("I am a polygon.");
 </script>
</body>
</html>